rm(list = ls())
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
bnb.data <- read.csv("airbnb_data.csv") %>%
mutate(price = exp(log_price))
summary(bnb.data)
?zoo
library(zoo)
library(lubridate)
rm(list = ls())
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(zoo)
library(lubridate)
bnb.data <- read.csv("airbnb_data.csv") %>%
mutate(price = exp(log_price))
View(bnb.data)
bnb.raw <- read.csv("airbnb_data.csv") %>%
mutate(price = exp(log_price))
?as.Date
bnb.data <- bnb.raw %>%
mutate(host_since = as.Date(host_since, format = "%d/%m/%y"))
View(bnb.data)
View(bnb.data)
bnb.data <- bnb.raw %>%
mutate(host_since = as.Date(host_since, format = "%d/%m/%y"),
first_review = as.Date(first_review, format = "%d/%m/%y"),
last_review = as.Date(last_review, format = "%d/%m/%y"))
View(bnb.data)
View(bnb.raw)
bnb.data <- bnb.raw %>%
mutate(host_since   = as.Date(host_since,   format = "%m/%d/%y"),
first_review = as.Date(first_review, format = "%m/%d/%y"),
last_review  = as.Date(last_review,  format = "%m/%d/%y"))
View(bnb.data)
?time_length
?interval
?time_length
bnb.data <- bnb.raw %>%
mutate(host_since   = as.Date(host_since,   format = "%m/%d/%y"),
first_review = as.Date(first_review, format = "%m/%d/%y"),
last_review  = as.Date(last_review,  format = "%m/%d/%y")) %>%
mutate(timelong = time_length(host_since %--% first_review, unit = "day"))
bnb.data <- bnb.raw %>%
mutate(host_since   = as.Date(host_since,   format = "%m/%d/%y"),
first_review = as.Date(first_review, format = "%m/%d/%y"),
last_review  = as.Date(last_review,  format = "%m/%d/%y")) %>%
mutate(post_wait = time_length(host_since %--% first_review, unit = "day"))
attach(bnb.data)
library(ggplot2)
rm(list = ls())
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(zoo)
library(lubridate)
library(ggplot2)
bnb.raw <- read.csv("airbnb_data.csv") %>%
mutate(price = exp(log_price))
bnb.data <- bnb.raw %>%
mutate(host_since   = as.Date(host_since,   format = "%m/%d/%y"),
first_review = as.Date(first_review, format = "%m/%d/%y"),
last_review  = as.Date(last_review,  format = "%m/%d/%y")) %>%
mutate(post_wait = time_length(host_since %--% first_review, unit = "day"))
summary(bnb.data)
#ggplot(diamonds,aes(x=price))+geom_density()
hist(post_wait)
ggplot(bnb.data,aes(x=post_wait))+geom_density()
View(bnb.data)
test.data <- bnb.data %>%
filter(post_wait < 0)
View(test.data)
class(test.data$amenities)
bnb.data <- bnb.raw %>%
mutate(host_since   = as.Date(host_since,   format = "%m/%d/%y"),
first_review = as.Date(first_review, format = "%m/%d/%y"),
last_review  = as.Date(last_review,  format = "%m/%d/%y")) %>%
mutate(post_wait = time_length(host_since %--% first_review, unit = "day")) %>%
mutate(host_has_profile_pic = ifelse(host_has_profile_pic==t, TRUE, FALSE))
bnb.data <- bnb.raw %>%
mutate(host_since   = as.Date(host_since,   format = "%m/%d/%y"),
first_review = as.Date(first_review, format = "%m/%d/%y"),
last_review  = as.Date(last_review,  format = "%m/%d/%y")) %>%
mutate(post_wait = time_length(host_since %--% first_review, unit = "day")) %>%
mutate(host_has_profile_pic = ifelse(host_has_profile_pic=="t", TRUE, FALSE))
bnb.data <- bnb.raw %>%
mutate(host_since   = as.Date(host_since,   format = "%m/%d/%y"),
first_review = as.Date(first_review, format = "%m/%d/%y"),
last_review  = as.Date(last_review,  format = "%m/%d/%y")) %>%
mutate(post_wait = time_length(host_since %--% first_review, unit = "day"))
library(stringr)
bnb.data <- bnb.raw %>%
mutate(host_since   = as.Date(host_since,   format = "%m/%d/%y"),
first_review = as.Date(first_review, format = "%m/%d/%y"),
last_review  = as.Date(last_review,  format = "%m/%d/%y")) %>%
mutate(post_wait = time_length(host_since %--% first_review, unit = "day")) %>%
mutate(am_Internet = str_detect(amenities, "Internet"))
bnb.data <- bnb.raw %>%
mutate(host_since   = as.Date(host_since,   format = "%m/%d/%y"),
first_review = as.Date(first_review, format = "%m/%d/%y"),
last_review  = as.Date(last_review,  format = "%m/%d/%y")) %>%
mutate(post_wait = time_length(host_since %--% first_review, unit = "day")) %>%
mutate(amenities = as.character(amenities)) %>%
mutate(am_Internet = str_detect(amenities, "Internet"))
View(bnb.data)
View(test.data)
a <- TRUE
a <- TRUE | FALSE
a <- TRUE & FALSE
bnb.data <- bnb.raw %>%
mutate(host_since   = as.Date(host_since,   format = "%m/%d/%y"),
first_review = as.Date(first_review, format = "%m/%d/%y"),
last_review  = as.Date(last_review,  format = "%m/%d/%y")) %>%
mutate(post_wait = time_length(host_since %--% first_review, unit = "day")) %>%
mutate(amenities = as.character(amenities)) %>%
mutate(am_Internet = (str_detect(amenities, "Internet") |
str_detect(amenities, "Wireless Internet")),
am_TV = (str_detect(amenities, "TV") | str_detect(amenities, "Cable TV")),
am_AC = str_detect(amenities, "Air conditioning"),
am_Kitchen = str_detect(amenities, "Kitchen"),
am_Heating = str_detect(amenities, "Heating"),
am_Washer = str_detect(amenities, "Washer"),
am_Dryer = str_detect(amenities, "Dryer"),
am_Parking = str_detect(amenities, "Free parking on premises"),
am_Shampoo = str_detect(amenities, "Shampoo"),
am_Essentials = str_detect(amenities, "Essentials"))
View(bnb.data)
library(dplyr)
rm(list = ls())
# knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(zoo)
library(lubridate)
library(ggplot2)
library(stringr)
bnb.raw <- read.csv("airbnb_data.csv") %>%
mutate(price = exp(log_price))
bnb.data <- bnb.raw %>%
mutate(host_since   = as.Date(host_since,   format = "%m/%d/%y"),
first_review = as.Date(first_review, format = "%m/%d/%y"),
last_review  = as.Date(last_review,  format = "%m/%d/%y")) %>%
mutate(post_wait = time_length(host_since %--% first_review, unit = "day")) %>%
mutate(amenities = as.character(amenities)) %>%
mutate(am_Internet = (str_detect(amenities, "Internet") |
str_detect(amenities, "Wireless Internet")),
am_TV = (str_detect(amenities, "TV") | str_detect(amenities, "Cable TV")),
am_AC = str_detect(amenities, "Air conditioning"),
am_Kitchen = str_detect(amenities, "Kitchen"),
am_Heating = str_detect(amenities, "Heating"),
am_Washer = str_detect(amenities, "Washer"),
am_Dryer = str_detect(amenities, "Dryer"),
am_Parking = str_detect(amenities, "Free parking on premises"),
am_Shampoo = str_detect(amenities, "Shampoo"),
am_Essentials = str_detect(amenities, "Essentials"))
summary(bnb.data)
source('G:/Box Sync/MyFiles/722/homework/FP/DataCleaning.R')
rm(list = ls())
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(zoo)
library(lubridate)
library(ggplot2)
library(stringr)
bnb.raw <- read.csv("airbnb_data.csv") %>%
mutate(price = exp(log_price))
bnb.data <- bnb.raw %>%
mutate(host_since   = as.Date(host_since,   format = "%m/%d/%y"),
first_review = as.Date(first_review, format = "%m/%d/%y"),
last_review  = as.Date(last_review,  format = "%m/%d/%y")) %>%
mutate(post_wait = time_length(host_since %--% first_review, unit = "day")) %>%
mutate(amenities = as.character(amenities)) %>%
mutate(am_Internet = (str_detect(amenities, "Internet") |
str_detect(amenities, "Wireless Internet")),
am_TV = (str_detect(amenities, "TV") | str_detect(amenities, "Cable TV")),
am_AC = str_detect(amenities, "Air conditioning"),
am_Kitchen = str_detect(amenities, "Kitchen"),
am_Heating = str_detect(amenities, "Heating"),
am_Washer = str_detect(amenities, "Washer"),
am_Dryer = str_detect(amenities, "Dryer"),
am_Parking = str_detect(amenities, "Free parking on premises"),
am_Shampoo = str_detect(amenities, "Shampoo"),
am_Essentials = str_detect(amenities, "Essentials"))
summary(bnb.data)
test.data <- bnb.data %>%
filter(post_wait < 0) #22 obs has host_since > first_review...
attach(bnb.data)
ggplot(bnb.data,aes(x=post_wait))+geom_density()
hist(post_wait)
hist(price)
hist(accommodates)
hist(beds)
hist(bedrooms)
save(bnb.data, file = "bnb_data.Rdata")
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(maps)
states_map <- map_data("state")
head(states_map)
con=dbConnect(MySQL(),user='root',password='123',dbname='cmcc',host='localhost')
library(ggmap)
library(mapproj)
library(DBI)
library(RMySQL)
install.packages("mapproj")
install.packages("RMySQL")
con=dbConnect(MySQL(),user='root',password='123',dbname='cmcc',host='localhost')
library(ggmap)
library(mapproj)
library(DBI)
library(RMySQL)
con=dbConnect(MySQL(),user='root',password='123',dbname='cmcc',host='localhost')
load("bnb_data.Rdata")
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
rm(list = ls())
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(maps)
states_map <- map_data("state")
head(states_map)
load("bnb_data.Rdata")
View(bnb.data)
bnb_map <- load("bnb_data.Rdata") %>%
select(longitude, latitude, X)
bnb_map <- load("bnb_data.Rdata") %>%
select(longitude & latitude & X)
library(dplyr)
rm(list = ls())
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
bnb_map <- load("bnb_data.Rdata") %>%
select(longitude & latitude & X)
bnb_map <- load("bnb_data.Rdata") %>%
dplyr::select(longitude & latitude & X)
View(bnb.data)
bnb_map <- load("bnb_data.Rdata") %>%
dplyr::select(longitude, latitude, X)
?select
bnb_map <- load("bnb_data.Rdata") %>%
dplyr::select(longitude, latitude, X)
bnb_map <- bnb.data %>%
dplyr::select(longitude, latitude, X)
View(bnb_map)
library(ggplot2)
library(maps)
states_map <- map_data("state")
# head(states_map)
View(states_map)
bnb_map <- bnb.data %>%
dplyr::select(longitude, latitude, X) %>%
rename(long = longitude, lat = latitude)
map.data <- states_map %>%
left_join(bnb_map, by = c(long, lat))
View(bnb.data)
View(bnb_map)
?left_join
map.data <- states_map %>%
left_join(bnb_map, by = c("long", "lat"))
View(map.data)
View(bnb_map)
View(bnb.data)
?str_pad
bnb.data <- bnb.raw %>%
mutate(host_since   = as.Date(host_since,   format = "%m/%d/%y"),
first_review = as.Date(first_review, format = "%m/%d/%y"),
last_review  = as.Date(last_review,  format = "%m/%d/%y")) %>%
mutate(post_wait = time_length(host_since %--% first_review, unit = "day")) %>%
mutate(zipcode = as.character(zipcode)) %>%
mutate(zipcode = str_pad(zipcode,5,side="left",pad="0"))
bnb.raw <- read.csv("airbnb_data.csv") %>%
mutate(price = exp(log_price))
rm(list = ls())
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(zoo)
library(lubridate)
library(ggplot2)
library(stringr)
bnb.raw <- read.csv("airbnb_data.csv") %>%
mutate(price = exp(log_price))
bnb.data <- bnb.raw %>%
mutate(host_since   = as.Date(host_since,   format = "%m/%d/%y"),
first_review = as.Date(first_review, format = "%m/%d/%y"),
last_review  = as.Date(last_review,  format = "%m/%d/%y")) %>%
mutate(post_wait = time_length(host_since %--% first_review, unit = "day")) %>%
mutate(zipcode = as.character(zipcode)) %>%
mutate(zipcode = str_pad(zipcode,5,side="left",pad="0")) %>%
mutate(amenities = as.character(amenities)) %>%
mutate(am_Internet = (str_detect(amenities, "Internet") |
str_detect(amenities, "Wireless Internet")),
am_TV = (str_detect(amenities, "TV") | str_detect(amenities, "Cable TV")),
am_AC = str_detect(amenities, "Air conditioning"),
am_Kitchen = str_detect(amenities, "Kitchen"),
am_Heating = str_detect(amenities, "Heating"),
am_Washer = str_detect(amenities, "Washer"),
am_Dryer = str_detect(amenities, "Dryer"),
am_Parking = str_detect(amenities, "Free parking on premises"),
am_Shampoo = str_detect(amenities, "Shampoo"),
am_Essentials = str_detect(amenities, "Essentials"))
save(bnb.data, file = "bnb_data.Rdata")
View(bnb.data)
rm(list = ls())
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
library(maps)
us <- map_data("state")
# head(states_map)
load("bnb_data.Rdata")
ggplot(bnb.data,aes(longitude,latitude)) +
geom_polygon(data=us,aes(x=long,y=lat,group=group),color='gray',fill=NA,alpha=.35)+
geom_point(aes(color = price),size=.15,alpha=.25) +
xlim(-125,-65)+ylim(20,50)
ggplot(bnb.data,aes(longitude,latitude)) +
geom_polygon(data=us,aes(x=long,y=lat,group=group),color='gray',fill=NA,alpha=.35)+
geom_point(aes(color = price, size = price),alpha=.25) +
xlim(-125,-65)+ylim(20,50)
ggplot(bnb.data,aes(longitude,latitude)) +
geom_polygon(data=us,aes(x=long,y=lat,group=group),color='gray',fill=NA,alpha=.35)+
geom_point(aes(color = price),size=.15,alpha=.25) +
xlim(-125,-65)+ylim(20,50)
summary(bnb.data$city)
LA.data <- bnb.data %>%
filter(city=="LA")
ggplot(LA.data,aes(longitude,latitude)) +
geom_polygon(data=us,aes(x=long,y=lat,group=group),color='gray',fill=NA,alpha=.35)+
geom_point(aes(color = price),size=.15,alpha=.25) +
xlim(-125,-65)+ylim(20,50)
View(us)
ca <- filter(us, group=="california")
ggplot(bnb.data,aes(longitude,latitude)) +
geom_polygon(data=ca,aes(x=long,y=lat,group=group),color='gray',fill=NA,alpha=.35)+
geom_point(aes(color = price),size=.15,alpha=.25) +
xlim(-125,-65)+ylim(20,50)
ggplot(bnb.data,aes(longitude,latitude)) +
geom_polygon(data=us,aes(x=long,y=lat,group=group),color='gray',fill=NA,alpha=.35)+
geom_point(aes(color = price),size=.15,alpha=.25) +
xlim(-125,-65)+ylim(20,50)
summary(bnb.data$city)
?map_data
ca <- map_data("California")
?namespace::maps
map_data
map_data$region
?map_data
ca <- map_data("county")
View(ca)
View(ca)
ca <- map_data("county") %>%
filter(region == "california")
ggplot(bnb.data,aes(longitude,latitude)) +
geom_polygon(data=ca,aes(x=long,y=lat,group=group),color='gray',fill=NA,alpha=.35)+
geom_point(aes(color = price),size=.15,alpha=.25) +
xlim(-125,-65)+ylim(20,50)
bnb.ca <- filter(bnb.data, city == "LA" | city == "SF")
View(bnb.ca)
ggplot(bnb.ca,aes(longitude,latitude)) +
geom_polygon(data=ca,aes(x=long,y=lat,group=group),color='gray',fill=NA,alpha=.35)+
geom_point(aes(color = price),size=.15,alpha=.25) +
xlim(-125,-65)+ylim(20,50)
summary(ca)
ggplot(bnb.ca,aes(longitude,latitude)) +
geom_polygon(data=ca,aes(x=long,y=lat,group=group),color='gray',fill=NA,alpha=.35)+
geom_point(aes(color = price),size=.15,alpha=.25) +
xlim(-125,-114)+ylim(32,43)
?map_data
ggplot(bnb.ca,aes(longitude,latitude)) +
geom_polygon(data=ca,aes(x=long,y=lat,group=group),color='gray',fill=NA,alpha=.35)+
geom_point(aes(color = price),size=.15,alpha=.25) +
xlim(-125,-114)+ylim(32,43) +
coord_fixed(1.3)
?coord_fixed(1.3)
